{% extends "../../partials/analytics/layout.njk" %}

{% from "../../partials/analytics/chartPrisonersOnLevels.njk" import chartPrisonersOnLevels %}
{% from "../../partials/analytics/chartTrends.njk" import chartTrends %}

{% set chartPageId = "incentive-levels" %}
{% set chartPageTitle = "Incentive levels" %}
{% set pageTitle = applicationName + " â€“ " + chartPageTitle %}

{% set extraWideLabel = analyticsView.isNational() %}

{% block chartContent %}

  <div class="govuk-grid-row">
    <section class="{% if extraWideLabel %}govuk-grid-column-full{% else %}govuk-grid-column-two-thirds{% endif %} govuk-!-margin-bottom-9">

      {% set chartId = "incentive-levels-by-location" %}
      {{ chartPrisonersOnLevels(
        title=IncentiveLevelsChartsContent[chartId].title,
        guidance=IncentiveLevelsChartsContent[chartId].guidance,
        labelColumn=IncentiveLevelsChartsContent[chartId].labelColumn,
        chartId=chartId,
        googleAnalyticsCategory=IncentiveLevelsChartsContent[chartId].googleAnalyticsCategory,
        activeCaseload=user.activeCaseload.id,
        form=forms[chartId],
        csrfToken=csrfToken,
        report=prisonersOnLevels,
        labelColumnWidth="extra-wide" if extraWideLabel else undefined
      ) }}

    </section>
  </div>

  <div class="govuk-grid-row">
    <section class="govuk-grid-column-two-thirds govuk-!-margin-bottom-9">

      {% set chartId = "trends-incentive-levels" %}
      {{ chartTrends(
        title=IncentiveLevelsChartsContent[chartId].title,
        guidance=IncentiveLevelsChartsContent[chartId].guidance,
        chartId=chartId,
        googleAnalyticsCategory=IncentiveLevelsChartsContent[chartId].googleAnalyticsCategory,
        activeCaseload=user.activeCaseload.id,
        form=forms[chartId],
        csrfToken=csrfToken,
        report=trends
      ) }}

    </section>
  </div>

{% endblock %}
